# Still Time Beauty - Production URL Rewriting
RewriteEngine On

# Custom error pages
ErrorDocument 404 /404.php

# Redirect www to non-www (if you want this)
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

# Force HTTPS (if you want this)
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Handle index redirects - both index.php and index should go to root
RewriteRule ^index\.php/?$ / [R=301,L]
RewriteRule ^index/?$ / [R=301,L]

# Redirect .php URLs to clean URLs (301 permanent redirect)
RewriteCond %{THE_REQUEST} /([^.]+)\.php [NC]
RewriteRule ^ /%1? [NC,L,R=301]

# Blog root page
RewriteRule ^blog/?$ blog.php [L]

# Blog posts
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/blog/.*\.php$
RewriteRule ^blog/([^/]+)/?$ /blog/$1.php [L]

# Explicit rules for main pages (more reliable)
RewriteRule ^about/?$ about.php [L]
RewriteRule ^services/?$ services.php [L]
RewriteRule ^cancellation-policy/?$ cancellation-policy.php [L]

# Legal pages
RewriteRule ^legal/privacy-policy/?$ legal/privacy-policy.php [L]
RewriteRule ^legal/terms-of-service/?$ legal/terms-of-service.php [L]
RewriteRule ^legal/hipaa-notice/?$ legal/hipaa-notice.php [L]
RewriteRule ^legal/medical-disclaimers/?$ legal/medical-disclaimers.php [L]

# Fallback: Generic clean URL handling
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^.]+)/?$ $1.php [NC,L]

# Handle root domain
DirectoryIndex index.php 